---
title: 10ä¸‡çº§æ•°æ®æ¸²æŸ“ä¼˜åŒ–æ–¹æ¡ˆ
excerpt: false
thumbnail: 'https://jiangwen-blog.oss-cn-fuzhou.aliyuncs.com/images/dd3e880811ebb6e017c2d2eca2.webp'
tags: [ç§»åŠ¨ç«¯, å…¼å®¹]
categories: [CSS]
date: 2021-11-18 11:25:00
---



å‡è®¾æˆ‘ä»¬éœ€è¦åœ¨é¡µé¢ä¸ŠåŠ è½½è·å–åˆ°çš„10ä¸‡æ¡æ•°æ®ğŸ“Šï¼Œåœ¨ä¸é‡‡å–ä¼˜åŒ–æ–¹æ¡ˆçš„æƒ…å†µä¸‹å®ƒçš„è€—æ—¶ä¸º 482 ms

```html
   <div id="container"></div>

   <script>
        const container = document.getElementById('container')
        const getList = () => {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve()
                }, 200);
            }).then(() => {
                let arr = []
                for (let i = 0; i < 100000; i++) {
                    arr[i] = { id: i, text: i }
                }
                return arr
            })
        }
        // ä¸ä¼˜åŒ–æƒ…å†µï¼š
        const renderList = () => {
            getList().then(res => {
                console.time('ä¸ä¼˜åŒ–')
                res.forEach(item => {
                    const div = document.createElement('div')
                    div.innerHTML = `<span>${item.text}</span>`
                    container.appendChild(div)
                });
                console.timeEnd('ä¸ä¼˜åŒ–')
            })
        }
  </script>
```



å¦‚æœä½¿ç”¨äº†**åˆ†é¡µä¼˜åŒ–**åçš„è€—æ—¶ä¸º212 ms

```js
 // ä¼˜åŒ–æƒ…å†µ(åˆ†é¡µ + requestAnimationFrame + createDocumentFragment)
const renderList2 = () => {
  console.time('åˆ†é¡µä¼˜åŒ–')
  getList().then(res => {
    const total = res.length // æ€»æ¡æ•°
    const limit = 10000 // æ¯é¡µæ•°é‡
    const page = 0 // èµ·å§‹é¡µ
    const totalPage = Math.ceil(total / limit)

    const render = (page) => {
      if(totalPage<= page)return
      requestAnimationFrame(()=>{ // requestAnimationFrameå‡å°‘é‡æ’
        const fragment = document.createDocumentFragment() // æ–‡æ¡£ç¢ç‰‡
        for (let i = page * limit; i < page * limit + limit; i++) {
          const item = res[i];
          const div = document.createElement('div')
          div.innerHTML = `<span>${ item.text }</span>`
          fragment.appendChild(div)
        }
        container.appendChild(fragment)
        render(page + 1)
      })
    }
    render(page)
    console.timeEnd('åˆ†é¡µä¼˜åŒ–')
  })
}
```

å¦‚æœdomç»“æ„æ›´å¤æ‚ï¼Œå·®è·å°†æ›´å¤§
